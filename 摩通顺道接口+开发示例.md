接口文档
http 接口
http://kintsuji.motonbackend.top/swoft/api/motong/
post 请求
json 格式
1. 全部订单查询
接口地址：deviceOrderQueueList
请求参数
deviceid 设备 id
举例：
{"deviceId":"1"}
返回响应数据参数：
code 0
msg 接口返回成功或者失败
data
id 订单 id
num 数量
realPrice 真实价格
status 1.待支付 2.已支付 3.待制作 4.制作中 5.已完
成
orderNum 订单编号
created_at 创建时间戳
createdAt 创建时间
statusName 状态名称
typeList4 其他类
typeList3 冰淇淋类
Id 设备商品规格
deviceGoodsId 商品 id
type 1 奶茶,2 咖啡,3 冰淇凌,4 其他
orderId 订单 id
goodsId 商品 id
goodsName 商品名称
goodsImg 商品图片
goodsOptionName 规格名称
status 1 已删除 0 已取消 1 待付款 2 已付款 3 扫
码排队(待制作) 4 制作中 5 已完成 -3 已退款
',
price 价格
rePrice 原价格
matterCodes 物料 codes
num 数量
totalPrice 小计
lhImgPath 打印图片
jsonCodeVal 规格类
classCode 品类
headCode 温度
cupCode 杯型
sweetCode 甜度
SugarCode 糖类
path 图片地址
goodsPath 图片地址
statusName 状态名称
typeList2 咖啡类
typeList1 奶茶类
举例：
{
"code": 0,
"msg": "Request successfully",
"data": [
{
"id": 743,
"num": 1,
"realPrice": "1.00",
"status": 3,
"orderNum": "2024061250545610",
"created_at": 1718163490,
"createdAt": "2024-06-12 03:38:10",
"statusName": "Queuing",
"typeList4": [
],
"typeList3": [
{
"id": 779,
"deviceGoodsId": 4,
"type": 3,
"orderId": 743,
"goodsId": 3,
"goodsName": "SLUSH1",
"goodsImg": 28,
"goodsOptionName": "",
"status": 3,
"price": "1.00",
"rePrice": "1.00",
"matterCodes": "",
"num": 1,
"totalPrice": "1.00",
"lhImgPath": "",
"jsonCodeVal": "[{\"classCode\":\"3002\"}]",
"path": "\/public\/uploads\/28.jpg",
"goodsPath": "http:\/\/moxige.motonbackend.to
p\/\/public\/uploads\/28.jpg",
"statusName": "Queuing"
}
],
"typeList2": [
],
"typeList1": [
]
},
{
"id": 744,
"num": 1,
"realPrice": "1.00",
"status": 3,
"orderNum": "2024061298505055",
"created_at": 1718163531,
"createdAt": "2024-06-12 03:38:51",
"statusName": "Queuing",
"typeList4": [
],
"typeList3": [
{
"id": 780,
"deviceGoodsId": 5,
"type": 3,
"orderId": 744,
"goodsId": 4,
"goodsName": "SLUSH2",
"goodsImg": 29,
"goodsOptionName": "",
"status": 3,
"price": "1.00",
"rePrice": "1.00",
"matterCodes": "",
"num": 1,
"totalPrice": "1.00",
"lhImgPath": "",
"jsonCodeVal": "[{\"classCode\":\"3003\"}]",
"path": "\/public\/uploads\/29.jpg",
"goodsPath": "http:\/\/moxige.motonbackend.to
p\/\/public\/uploads\/29.jpg",
"statusName": "Queuing"
}
],
"typeList2": [
],
"typeList1": [
]
}
]
}
2. 修改订单状态
接口地址：editDeviceOrderStatus
请求参数
orderId 订单 id
orderGoodsId 订单商品 ID
status 状态 1 正常 -1 删除
举例：
{"orderId":753,"orderGoodsId":789,"status":4}
返回数据参数
{"code":0,"msg":"Operation successfully","data":[]}
3. 扫码排队
接口地址：orderQueue
请求参数
orderNum 订单 id
deviceId 订单商品 ID
type 状态 1 正常 -1 删除
举例：
{"orderNum":"2024061251545351","deviceId":"1","type":0}
返回数据参数
返回响应数据参数：
code 0
msg 接口返回成功或者失败
data
id 订单 id
num 数量
realPrice 真实价格
status 1.待支付 2.已支付 3.待制作 4.制作中 5.已完
成
orderNum 订单编号
created_at 创建时间戳
createdAt 创建时间
statusName 状态名称
typeList4 其他类
typeList3 冰淇淋类
Id 设备商品规格
deviceGoodsId 商品 id
type 1 奶茶,2 咖啡,3 冰淇凌,4 其他
orderId 订单 id
goodsId 商品 id
goodsName 商品名称
goodsImg 商品图片
goodsOptionName 规格名称
status 1 已删除 0 已取消 1 待付款 2 已付款 3 扫
码排队(待制作) 4 制作中 5 已完成 -3 已退款
',
price 价格
rePrice 原价格
matterCodes 物料 codes
num 数量
totalPrice 小计
lhImgPath 打印图片
jsonCodeVal 规格类
classCode 品类
headCode 温度
cupCode 杯型
sweetCode 甜度
SugarCode 糖类
path 图片地址
goodsPath 图片地址
statusName 状态名称
typeList2 咖啡类
typeList1 奶茶类
举例：
{
"code": 0,
"msg": "Order queued successfully; please wait while we prepare yo
ur order.",
"data": {
"id": 1035,
"deviceId": 1,
"orderNum": "2024061251545351",
"uid": 6,
"num": 1,
"payMoney": "0.50",
"guomaoCode": "",
"status": 2,
"payTime": "2024-06-12 07:36:56",
"queueTime": "1970-01-01 00:00:00",
"makeTime": "1970-01-01 00:00:00",
"successTime": "1970-01-01 00:00:00",
"payment_intent": "pi_3PQljlBMYUSl4cfm41RxO347",
"name": "STORE1",
"address": "辽宁省沈阳市铁西区十三号路",
"guomaoChannel": "123",
"guomaoUsedUser": "22110001",
"createdTime": "2024-06-12 07:36:19",
"updatedTime": "2024-06-12 07:36:56",
"typeList4": [
],
"typeList3": [
],
"typeList2": [
{
"id": 1160,
"deviceGoodsId": 26,
"type": 2,
"orderId": 1035,
"goodsId": 23,
"goodsName": "Espresso Shot",
"goodsImg": 50,
"goodsOptionName": "Bean2",
"status": 2,
"price": "1.00",
"rePrice": "1.00",
"matterCodes": "CoffeMatter13,CoffeMatter5,CoffeM
atter2,CoffeMatter19",
"num": 1,
"totalPrice": "1.00",
"lhImgPath": "",
"jsonCodeVal": "[{\"classCode\":\"1\"},{\"beanCode\":
\"2\"}]",
"path": "public\/uploads\/20231110\/528664ec6f6388
e81f06214b018ef14c.jpg",
"goodsPath": "http:\/\/jianada.motonbackend.top\/p
ublic\/uploads\/20231110\/528664ec6f6388e81f06214b018ef14c.jpg",
"statusName": "To be used"
}
],
"typeList1": [
]
}
}
4. 保存物料和设备状态
接口地址：saveDeviceMatter
请求参数
matterStatusJson 物料 json
deviceStatusJson 设备 json
deviceId 设备 id
举例：
{
"matterStatusJson": "{\"CoffeMatter1\":1,\"CoffeMatter2\":1,\"Coff
eMatter5\":0,\"CoffeMatter11\":0,\"CoffeMatter13\":0,\"CoffeMatter10\
":0,\"CoffeMatter12\":0,\"CoffeMatter14\":0,\"CoffeMatter15\":0,\"Coff
eMatter16\":0,\"CoffeMatter17\":0,\"CoffeMatter18\":0,\"CoffeMatter19
\":0,\"CoffeMatter20\":0}",
"deviceStatusJson": "{\"deviceStatus1\":1,\"deviceStatus2\":1,\"devi
ceStatus3\":1,\"deviceStatus4\":0,\"lhStatus\":1}",
"deviceId": 1
}
返回格式举例：
{"code":0,"msg":"Request successfully","data":[]}